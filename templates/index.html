<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Model Visualization</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .guess { font-weight: bold; }
        .correct { color: green; }
        .present { color: orange; }
        .absent { color: red; }
        .letter { margin-right: 5px; }
    </style>
</head>
<body>
    <h1>Wordle Model Visualization</h1>
    <button onclick="startNewGame()">Start New Game</button>
    <button onclick="autoPlay()">Auto Play</button>
    <div id="target-word"></div>
    <div id="game-log"></div>

    <script>
        function startNewGame() {
            fetch('/new_game')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('game-log').innerHTML = "<p>New game started!</p>";
                    document.getElementById('target-word').innerHTML = "";
                });
        }

        function autoPlay() {
            fetch('/auto_play', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                const log = document.getElementById('game-log');
                const target = document.getElementById('target-word');
                
                // Show the target word
                if (data.length > 0) {
                    target.innerHTML = `<p>Target Word: <strong>${data[0].target_word}</strong></p>`;
                }

                data.forEach(entry => {
                    let resultText = '<p class="guess">';
                    entry.status.forEach(letter => {
                        let className = '';
                        if (letter.status === 2) {
                            className = 'correct';
                        } else if (letter.status === 1) {
                            className = 'present';
                        } else {
                            className = 'absent';
                        }
                        resultText += `<span class="letter ${className}">${letter.char}</span>`;
                    });
                    resultText += ` - ${entry.success ? "Success" : "Failed"}</p>`;
                    log.innerHTML += resultText;
                });
                log.scrollTop = log.scrollHeight;
            });
        }
    </script>
</body>
</html>
